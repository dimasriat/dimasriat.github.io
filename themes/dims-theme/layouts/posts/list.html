{{- define "main" }}
<div class="terminal-posts">
    <header class="posts-header">
        <div class="posts-info">
            <span class="prompt">$</span> ls posts/
        </div>
        <div class="posts-meta">
            {{- $posts := where site.RegularPages "Section" "in" (slice "posts" "trading-journal") }}
            <span class="count">total {{ len $posts }}</span>
        </div>
    </header>
    
    <div class="posts-separator">────────────────────────────────────────────────</div>
    
    <table class="posts-table">
        <thead>
            <tr>
                <th class="type-col"></th>
                <th class="date-col">Date</th>
                <th class="title-col">Title</th>
            </tr>
        </thead>
        <tbody>
            {{- $posts := where site.RegularPages "Section" "in" (slice "posts" "trading-journal") }}
            {{- range $posts.ByDate.Reverse }}
            <tr>
                <td class="post-type">
                    {{- $icon := "*" }}
                    {{- if .Params.category }}
                        {{- if eq .Params.category "trading" }}{{ $icon = "$" }}
                        {{- else if eq .Params.category "code" }}{{ $icon = ">" }}
                        {{- else if eq .Params.category "life" }}{{ $icon = "@" }}
                        {{- else if eq .Params.category "tech" }}{{ $icon = "#" }}
                        {{- else if eq .Params.category "thoughts" }}{{ $icon = "~" }}
                        {{- else if eq .Params.category "analysis" }}{{ $icon = "%" }}
                        {{- end }}
                    {{- end }}
                    <span class="type-icon">[{{ $icon }}]</span>
                </td>
                <td class="post-date">{{ .Date.Format "2006-01-02" }}</td>
                <td class="post-title">
                    <a href="{{ .Permalink }}">{{ .Title }}</a>
                    {{- if .Params.lang }}
                    <span class="post-lang dim">[{{ .Params.lang }}]</span>
                    {{- end }}
                </td>
            </tr>
            {{- end }}
        </tbody>
    </table>
</div>
{{- end }}